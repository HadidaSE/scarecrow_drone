<?xml version="1.0"?>
<launch>
    <!--
    Intel Aero Drone Pigeon Detection Launch File
    Use this when deploying to the actual drone
    -->

    <!-- Arguments -->
    <arg name="config_path" default="$(find pigeon_detector)/config/detector_config.yaml"/>

    <!-- RealSense Camera (Intel Aero's built-in camera) -->
    <include file="$(find realsense_camera)/launch/r200_nodelet_rgbd.launch">
        <arg name="camera" value="camera"/>
        <arg name="depth_fps" value="30"/>
        <arg name="color_fps" value="30"/>
    </include>

    <!-- Pigeon Detector Node -->
    <node name="pigeon_detector_node"
          pkg="pigeon_detector"
          type="detector_node.py"
          output="screen">
        <param name="config_path" value="$(arg config_path)"/>
        <!-- Remap to RealSense topic -->
        <remap from="/camera/rgb/image_raw" to="/camera/color/image_raw"/>
    </node>
</launch>
